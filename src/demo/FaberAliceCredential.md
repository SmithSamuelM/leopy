# Faber Alice Demo

The goal of this document is to flesh out the open API demo described here:

https://github.com/hyperledger/aries-cloudagent-python/blob/master/demo/AriesOpenAPIDemo.md

but using the command line aca-py 0.3.1 and include the steps needed to create the public DIDs, schema and credential definition not included above.  Also wanted to use a different credential just to better understand the process

## Setup

Notes each the ledger is restarted must must wipe
out wallets so that they are in sync.  The wallet stores credential definitions, connections, DIDs and credentials.  Otherwise we must persist the ledger state across invocations of ledger.


## 1) Run the local indy ledger using docker.


```bash
$ cd /.../indy/indy-sdk/
$ docker run -itd -p 9701-9708:9701-9708 indy_pool
$ docker container ls
 ...  xenodochial_hermann
```
 
Later to stop ledger pool do

```bash
$ docker container stop xenodochial_hermann
```


## 2) Run the von-network web server ledger browser


```bash

$ cd /Data/Code/public/hyperledger/aries/von-network/
$ GENESIS_FILE=/Data/Code/public/hyperledger/aries/cloudagentpy/demo/local-genesis.txt PORT=9000 REGISTER_NEW_DIDS=true python3 -m server.server

```

Later to stop use

```bash
^-C ^-C
```

If later rebuild indy pool then pull latest von-network

Navigate web browser to:
http://localhost:9000


## 3) Use von-network browser to create public DIDs. One for each agent.

Navigate to http://127.0.0.1:9000

Faber:
Enter in field
```
Wallet Seed:  0123456789ABCDEF0123456789ABCDEF
```
Press ```Register DID```

Output:

```
Seed: 0123456789ABCDEF0123456789ABCDEF
DID: 3avoBCqDMFHFaKUHug9s8W
Verkey: 2QiWG18JjfjUFQMk8xdmhyphRzmbveaYbGM3R8iPbiBx
```

Note DID is same as ledger NYM in the associated transaction
Takes a few seconds for the ledger to show new transaction.
Go to Domain link on page

Ledger Transaction

```
#11
Message Wrapper
Transaction ID: 8e2cd66a244f6e9f282882168b085d235ecb162e7166693f750f62c219bc245c
Transaction time: 8/29/2019, 11:57:53 AM (1567101473)
Signed by: V4SGRU86Z58d6TV7PBUe6f
Root hash: 5i3RnvZweRKq9ULTpdtt1Cw5ENrnjnVMvUVs4DS6Bpy2
Audit path: EsY4hbw8MPXuyQTiq43pvwJqak6pGzfKwJKMXoi6uYS7, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: V4SGRU86Z58d6TV7PBUe6f
Request ID: 1567101473297111000
Digest: 828e098f762d12043e16cdc0d949a6034df454f454a7facb43fd32e92deb2ef8
Transaction
Type: NYM
Nym: 3avoBCqDMFHFaKUHug9s8W
Role: TRUST_ANCHOR
Verkey: 2QiWG18JjfjUFQMk8xdmhyphRzmbveaYbGM3R8iPbiBx
```

Do same for Alice

Alice

```Wallet Seed:  ABCDEF0123456789ABCDEF0123456789```

Output
```
Seed: ABCDEF0123456789ABCDEF0123456789
DID: KfoDwEpcJoNCdb6Akeeb9w
Verkey: BBAM5UQdhfFvSdihv4SbEcV3zAyLZ2dEs3WwBnh2cHw2
```

Note DID is same as ledger NYM

Ledger Transaction

```
#12
Message Wrapper
Transaction ID: 362ee23b301ecd06537351528d9e44b824ab69974f158f9b2fef1d55e0ec9dbe
Transaction time: 8/29/2019, 11:59:28 AM (1567101568)
Signed by: V4SGRU86Z58d6TV7PBUe6f
Root hash: BuhNcGEEHCucSo7u4xsus6ZJejuohoshp3VKEbYJhhC8
Audit path: APYHp3ityQ5qFX7FT4PEiAeAFgh2vuVV8jwP5bAfVprC, EsY4hbw8MPXuyQTiq43pvwJqak6pGzfKwJKMXoi6uYS7, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: V4SGRU86Z58d6TV7PBUe6f
Request ID: 1567101568489450000
Digest: 6ef9ddcc5331dd2b646456664dfc72ede64cae2d259c125785196da594e6ee7e
Transaction
Type: NYM
Nym: KfoDwEpcJoNCdb6Akeeb9w
Role: TRUST_ANCHOR
Verkey: BBAM5UQdhfFvSdihv4SbEcV3zAyLZ2dEs3WwBnh2cHw2
```

## 4) Run web hook server leopy

```bash
$ cd /.../leopy/src/
$ python3 -m leopy.leopyd -v 1
```

Navigate browser to 

http://localhost:8080/events 

to see SSE stream of events sent by Agent to Controller

## 5) Run aca-py CLI for each Agent (Faber and Alice)


If restarted Indy ledger pool need to clean wallets so start with empty wallets.

```bash
$ cd ~/.indy_client/wallet
$ rm -r agent*
```

Need to find out what ```~/.indy_client/wallet/trustee_wallet/``` is used for.

To get list of command line options.

```bash
$ aca-py start --help
```


Faber with webhook controller

```bash
$ aca-py start \
--inbound-transport http 0.0.0.0 8020 \
--outbound-transport http \
--log-level debug \
--debug-connections \
--debug-credentials \
--debug-presentations \
--endpoint http://localhost:8020 \
--label FaberAgent  \
--seed 0123456789ABCDEF0123456789ABCDEF \
--ledger-pool-name localindypool \
--admin 0.0.0.0 8021 \
--admin-insecure-mode \
--auto-ping-connection \
--public-invites \
--auto-accept-invites \
--auto-accept-requests \
--auto-respond-messages \
--auto-respond-credential-offer \
--auto-respond-presentation-request \
--auto-store-credential \
--auto-verify-presentation \
--wallet-key agent_faber \
--wallet-name agent_faber \
--wallet-type indy \
--genesis-url http://localhost:9000/genesis \
--webhook-url http://localhost:8080 
```

If it runs successfully the console should eventually print out the following:

```bash

::::::::::::::::::::::::::::::::::::::::::::::
:: Aries Cloud Agent                        ::
::                                          ::
::                                          ::
:: Inbound Transports:                      ::
::                                          ::
::   - http://0.0.0.0:8020                  ::
::                                          ::
:: Outbound Transports:                     ::
::                                          ::
::   - http                                 ::
::   - https                                ::
::                                          ::
:: Public DID Information:                  ::
::                                          ::
::   - DID: 3avoBCqDMFHFaKUHug9s8W          ::
::                                          ::
:: Administration API:                      ::
::                                          ::
::   - http://0.0.0.0:8021                  ::
::                                          ::
::                               ver: 0.3.1 ::
::::::::::::::::::::::::::::::::::::::::::::::

Listening...
```

Faber's Swagger interface is at http://127.0.0.1:8021/  
This is defined by the ```--admin 0.0.0.0 8021``` option above. 



Alice without controller

```bash
$ aca-py start \
--inbound-transport http 0.0.0.0 8030 \
--outbound-transport http \
--log-level debug \
--debug-connections \
--debug-credentials \
--debug-presentations \
--endpoint http://localhost:8030 \
--label AliceAgent \
--seed ABCDEF0123456789ABCDEF0123456789 \
--ledger-pool-name localindypool \
--admin 0.0.0.0 8031 \
--admin-insecure-mode \
--auto-ping-connection \
--public-invites \
--auto-accept-invites \
--auto-accept-requests \
--auto-respond-messages \
--auto-respond-credential-offer \
--auto-respond-presentation-request \
--auto-store-credential \
--auto-verify-presentation \
--wallet-key agent_alice \
--wallet-name agent_alice \
--wallet-type indy \
--genesis-url http://localhost:9000/genesis 
```

If it runs successfully the console should eventually print out the following:

```bash
::::::::::::::::::::::::::::::::::::::::::::::
:: Aries Cloud Agent                        ::
::                                          ::
::                                          ::
:: Inbound Transports:                      ::
::                                          ::
::   - http://0.0.0.0:8030                  ::
::                                          ::
:: Outbound Transports:                     ::
::                                          ::
::   - http                                 ::
::   - https                                ::
::                                          ::
:: Public DID Information:                  ::
::                                          ::
::   - DID: KfoDwEpcJoNCdb6Akeeb9w          ::
::                                          ::
:: Administration API:                      ::
::                                          ::
::   - http://0.0.0.0:8031                  ::
::                                          ::
::                               ver: 0.3.1 ::
::::::::::::::::::::::::::::::::::::::::::::::

Listening...

```

Alices's Swagger interface is at http://127.0.0.1:8031/  
This is defined by the ```--admin 0.0.0.0 8031``` option above. 



## 6) Create Connection invitation from Faber

Using swagger to create invitation on Faber's admin interface :8021

Faber
```
POST /connections/create-invitation  Create a new connection invitation
```


Response body:

```json
{
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "invitation": {
    "@type": "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/invitation",
    "@id": "50dac961-4698-42bd-aeb6-a4c950699e98",
    "recipientKeys": [
      "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA"
    ],
    "label": "FaberAgent",
    "serviceEndpoint": "http://localhost:8020"
  },
  "invitation_url": "http://localhost:8020?c_i=eyJAdHlwZSI6ICJkaWQ6c292OkJ6Q2JzTlloTXJqSGlxWkRUVUFTSGc7c3BlYy9jb25uZWN0aW9ucy8xLjAvaW52aXRhdGlvbiIsICJAaWQiOiAiNTBkYWM5NjEtNDY5OC00MmJkLWFlYjYtYTRjOTUwNjk5ZTk4IiwgInJlY2lwaWVudEtleXMiOiBbIkM4eXZiOGJMNTF6ZTc4Y1Q1dGtUSHd1c2pFSlN6bzVxcndGcWVOdHdHbWpBIl0sICJsYWJlbCI6ICJGYWJlckFnZW50IiwgInNlcnZpY2VFbmRwb2ludCI6ICJodHRwOi8vbG9jYWxob3N0OjgwMjAifQ=="
}
```


Invitation
```json
{
    "@type": "did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/connections/1.0/invitation",
    "@id": "50dac961-4698-42bd-aeb6-a4c950699e98",
    "recipientKeys":
    [
      "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA"
    ],
    "label": "FaberAgent",
    "serviceEndpoint": "http://localhost:8020"
}
```

Faber Webhook Events:

```json
Sink: /topic/connections/ POST
JSON:
{
  "topic": "connections",
  "data": {
    "routing_state": "none",
    "invitation_key": "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA",
    "updated_at": "2019-08-29 18:21:27.715601Z",
    "invitation_mode": "once",
    "state": "invitation",
    "accept": "auto",
    "created_at": "2019-08-29 18:21:27.715601Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "initiator": "self"
  }
}
```

## 7) Receive Connection invitation from Faber at Alice

Copy the entire block of the invitation object, from the curly brackets {},
excluding the trailing comma.

Go to Alice's Swagger :8031 and receive the invitation
Copy invitation response above

```
POST /connections/receive-invitation Receive a new connection invitation
```

Response:
```json
{
  "request_id": "5697a41e-a908-4670-bd5b-e55c42eb2660",
  "my_did": "DX1vsRqiRBFHaWoa2c2xuk",
  "invitation_key": "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA",
  "their_label": "FaberAgent",
  "accept": "auto",
  "created_at": "2019-08-29 18:29:34.186567Z",
  "initiator": "external",
  "updated_at": "2019-08-29 18:29:34.202358Z",
  "routing_state": "none",
  "invitation_mode": "once",
  "connection_id": "18f5e869-b565-4c12-9ae8-4f7c86c90aa3",
  "state": "request"
}
```

Faber Events Webhook:


```Sink: /topic/connections/ POST```
```json
{
  "topic": "connections",
  "data": {
    "routing_state": "none",
    "invitation_key": "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA",
    "updated_at": "2019-08-29 18:29:34.282529Z",
    "their_label": "AliceAgent",
    "invitation_mode": "once",
    "state": "request",
    "accept": "auto",
    "created_at": "2019-08-29 18:21:27.715601Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "initiator": "self",
    "their_did": "DX1vsRqiRBFHaWoa2c2xuk"
  }
}
```

```Sink: /topic/connections/ POST```
```JSON
{
  "topic": "connections",
  "data": {
    "routing_state": "none",
    "invitation_key": "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA",
    "updated_at": "2019-08-29 18:29:34.309522Z",
    "their_label": "AliceAgent",
    "invitation_mode": "once",
    "state": "response",
    "accept": "auto",
    "my_did": "FjNk2L4gSdVnXRwKMK3z1i",
    "created_at": "2019-08-29 18:21:27.715601Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "initiator": "self",
    "their_did": "DX1vsRqiRBFHaWoa2c2xuk"
  }
}
```

```Sink: /topic/connections/ POST```
```json
{
  "topic": "connections",
  "data": {
    "routing_state": "none",
    "invitation_key": "C8yvb8bL51ze78cT5tkTHwusjEJSzo5qrwFqeNtwGmjA",
    "updated_at": "2019-08-29 18:29:34.431462Z",
    "their_label": "AliceAgent",
    "invitation_mode": "once",
    "state": "active",
    "accept": "auto",
    "my_did": "FjNk2L4gSdVnXRwKMK3z1i",
    "created_at": "2019-08-29 18:21:27.715601Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "initiator": "self",
    "their_did": "DX1vsRqiRBFHaWoa2c2xuk"
  }
}
```



### Connection Success

```
Faber: "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886"
Alice: "connection_id": "18f5e869-b565-4c12-9ae8-4f7c86c90aa3"
```

## 8) Create Schema by Faber


Swagger Faber

```
POST /schemas  Sends a schema to the ledger
```

```json
{
  "schema_name": "fabername",
  "schema_version": "0.1.0",
  "attributes":
  [
    "name"
  ]
}
```

Response:
```json
{
  "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0"
}
```

schema_id is same as ledger transaction id

No Webhook events

Ledger:
Creates 3 ledger transactions: Two ATTRIB and one SCHEMA

```
#13
Message Wrapper
Transaction ID: 3avoBCqDMFHFaKUHug9s8W:1:b6bf7bc8d96f3ea9d132c83b3da8e7760e420138485657372db4d6a981d3fd9e
Transaction time: 8/29/2019, 12:19:04 PM (1567102744)
Signed by: 3avoBCqDMFHFaKUHug9s8W
Root hash: 2gZZm3f9wb2KZd3JUU4hzmT3uTr7YFRrqMtdAok2hqeV
Audit path: 2NxHyQq9vfvmwWgFdKD9ojazx8gcDcbAwp3JGC1tzMgM, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: 3avoBCqDMFHFaKUHug9s8W
Request ID: 1567102744096020000
Digest: f705e56c66f654edf859f29c3bb21f71d81661c21bc6d9a364691fd5c7b7d178
Transaction
Type: ATTRIB
Nym: 3avoBCqDMFHFaKUHug9s8W
Attribute data: {"endpoint":{"endpoint":"http://localhost:8020"}}
Raw Data

#14
Message Wrapper
Transaction ID: KfoDwEpcJoNCdb6Akeeb9w:1:b6bf7bc8d96f3ea9d132c83b3da8e7760e420138485657372db4d6a981d3fd9e
Transaction time: 8/29/2019, 12:19:40 PM (1567102780)
Signed by: KfoDwEpcJoNCdb6Akeeb9w
Root hash: 3cHSxpjwvs37v8TU4jwKXEwvLQ3UdKZZXG9w8v1B6eM8
Audit path: 5RZfCtk8E4wrnsWCE9P9WkdiJp9Jz1Haauz7q9WAyk5w, 2NxHyQq9vfvmwWgFdKD9ojazx8gcDcbAwp3JGC1tzMgM, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: KfoDwEpcJoNCdb6Akeeb9w
Request ID: 1567102780413361000
Digest: 6869718dbd29152682b2dae4c023baa8d43c5cd20b82b3d8f0441d6bf073dc35
Transaction
Type: ATTRIB
Nym: KfoDwEpcJoNCdb6Akeeb9w
Attribute data: {"endpoint":{"endpoint":"http://localhost:8030"}}
Raw Data

#15
Message Wrapper
Transaction ID: 3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0
Transaction time: 8/29/2019, 12:31:46 PM (1567103506)
Signed by: 3avoBCqDMFHFaKUHug9s8W
Root hash: EzQ7q1PNCDHn7L39bYLKbCYrWU4WHR4LUVD1EjxgnJVp
Audit path: EjF6Le6AC5XB1kAh6iroDj4ixA69Y5wfSgDFz2JG2urq, 2NxHyQq9vfvmwWgFdKD9ojazx8gcDcbAwp3JGC1tzMgM, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: 3avoBCqDMFHFaKUHug9s8W
Request ID: 1567103506600291000
Digest: ec75d504c62ebb7b8d40867b8ebef241091045611f0434fb5c8317fb3cccb7ab
Transaction
Type: SCHEMA
Schema name: fabername
Schema version: 0.1.0
Schema attributes:
name
Raw Data
```

## 9) Register Credential Definition by Faber


Faber
```POST /credential-definitions   Sends a credential definition to the ledger```

```json
{
  "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0"
}
```

Response :

```json
{
  "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
}
```

Cred Def ID and ledger transaction id are the same. Notice that schema trans number 15 is in the cred def id.

No webhook events

Ledger

```
#16
Message Wrapper
Transaction ID: 3avoBCqDMFHFaKUHug9s8W:3:CL:15:default
Transaction time: 8/29/2019, 12:34:30 PM (1567103670)
Signed by: 3avoBCqDMFHFaKUHug9s8W
Root hash: 2VYSieZypiHQCeqTMfx9basmLNxXiPdFtNgiysaYAoBz
Audit path: BAgpiYCVfkPA9MiskQMyKpmsxSsRgHBQBnXxAD7wSgM6, EjF6Le6AC5XB1kAh6iroDj4ixA69Y5wfSgDFz2JG2urq, 2NxHyQq9vfvmwWgFdKD9ojazx8gcDcbAwp3JGC1tzMgM, DNHM372JZJoGcxdHdmsj3QSSiomyeZux6ssJXxAJqyvd
Metadata
From nym: 3avoBCqDMFHFaKUHug9s8W
Request ID: 1567103670072570000
Digest: 0e6380dadb342d1d64a6859d803ac470f833b63abe5d07e0aa9f640d2e05e8a5
Transaction
Type: CRED_DEF
Reference: 15
Signature type: CL
Tag: default
Attributes:
master_secret
name
Raw Data
```

### Notes

OK, the one time setup work for issuing a credential complete.
We can now issue 1 or a million credentials without having to do those steps again.
Astute readers might note that we did not setup a revocation registry,
so we cannot revoke the credentials we issue with that credential definition.
You can’t have everything in an easy demo (and we’re still working on enabling that).


## 10) Issue Credential from Faber to Alice

Faber to Alice

```POST /credential_exchange/send    Sends a credential and automates the entire flow```

Use Faber's connection id with Alice and the cred def id from above.
Credential is just a name string. Not very interesting but basic.

```json
{
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
  "credential_values": {"name": "Alice Jones"}
}
```

Response:
```json
{
  "initiator": "self",
  "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
  "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
  "auto_issue": true,
  "updated_at": "2019-08-29 18:37:31.320519Z",
  "credential_offer": {
    "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
    "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
    "key_correctness_proof": {
      "c": "46407036265172047261204021629423991502466090868365745145292279790077348631844",
      "xz_cap": "514358086163629157650567502366045603791283435689648753096216628951829217387071270548022064242067923172303775209188206878602777130806708085662182444873715915707006424051822329774747940104622820526935382153796721114302609139820409518206030320453069391377853600678602058940007280847981247717609211161274065626753506401374547533297693454228563577964742706986776851038206782547363976602316748730885773315912884671436042633169683405175487045032363727960469933714430756533784714970530292181477756754243437291694024963873771433514459604683703590373829358242379854202354880761417128595571868348539354292668944733425925728070568663955227087914689314872545629071633888377824488220766173730746796700993529",
      "xr_cap": [
        [
          "name",
          "4125005438409553271190645242008945309424401294783620356628346040421347652800521101975851129841661164101737404556240381104702281446001991518585843422124308682976543996318942729161160417876901395727059158442209654710668759117787393003575648553928892614910061409796699141202392753862971260190266353533409750487990843470863484734559294480047877583187579915443150584318134836201270875484142486278529238792220151448605879613080529283568512623753535718782247457591423880156296978593591837268950820713798281707492483697733061162621469394140434818089203735654514269366360177320482183006902180843824932489584155587279368677673668332839779175926741601578460704370509770905502672519488670164986358961508"
        ],
        [
          "master_secret",
          "279696447996127413181178951007667952930603537254266927457135109532742142377340721797659362962364112048810611528981976226918418568626207072331002295820556449909140981085391931597864009717035313944000981808189153226770651299055648867074718655361991306599354656561020803449674736156706590568532378865150598011978855222675698812902413003360235385346648812158438716307624779172627948758157682297016725010280633208936321375071223290074760694575056778229594091008510346551211887562258132561580554854649985519228493445603024731080174362127379865941575338663874119374058435724706231493057883635304157687496839366804477575686061621541700613684597718962135768737902478096136715312198149799335538341494166"
        ]
      ]
    },
    "nonce": "235828921853214235996609"
  },
  "state": "offer_sent",
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "credential_values": {
    "name": "Alice Jones"
  },
  "credential_exchange_id": "d939054d-e081-4ed0-85e6-f5c20a9baa78",
  "created_at": "2019-08-29 18:37:31.320519Z"
}
```

Faber Webhook Events:

```Sink: /topic/credentials/ POST
JSON:```
```json
{
  "topic": "credentials",
  "data": {
    "initiator": "self",
    "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
    "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
    "auto_issue": true,
    "updated_at": "2019-08-29 18:37:31.320519Z",
    "credential_offer": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "key_correctness_proof": {
        "c": "46407036265172047261204021629423991502466090868365745145292279790077348631844",
        "xz_cap": "514358086163629157650567502366045603791283435689648753096216628951829217387071270548022064242067923172303775209188206878602777130806708085662182444873715915707006424051822329774747940104622820526935382153796721114302609139820409518206030320453069391377853600678602058940007280847981247717609211161274065626753506401374547533297693454228563577964742706986776851038206782547363976602316748730885773315912884671436042633169683405175487045032363727960469933714430756533784714970530292181477756754243437291694024963873771433514459604683703590373829358242379854202354880761417128595571868348539354292668944733425925728070568663955227087914689314872545629071633888377824488220766173730746796700993529",
        "xr_cap": [
          [
            "name",
            "4125005438409553271190645242008945309424401294783620356628346040421347652800521101975851129841661164101737404556240381104702281446001991518585843422124308682976543996318942729161160417876901395727059158442209654710668759117787393003575648553928892614910061409796699141202392753862971260190266353533409750487990843470863484734559294480047877583187579915443150584318134836201270875484142486278529238792220151448605879613080529283568512623753535718782247457591423880156296978593591837268950820713798281707492483697733061162621469394140434818089203735654514269366360177320482183006902180843824932489584155587279368677673668332839779175926741601578460704370509770905502672519488670164986358961508"
          ],
          [
            "master_secret",
            "279696447996127413181178951007667952930603537254266927457135109532742142377340721797659362962364112048810611528981976226918418568626207072331002295820556449909140981085391931597864009717035313944000981808189153226770651299055648867074718655361991306599354656561020803449674736156706590568532378865150598011978855222675698812902413003360235385346648812158438716307624779172627948758157682297016725010280633208936321375071223290074760694575056778229594091008510346551211887562258132561580554854649985519228493445603024731080174362127379865941575338663874119374058435724706231493057883635304157687496839366804477575686061621541700613684597718962135768737902478096136715312198149799335538341494166"
          ]
        ]
      },
      "nonce": "235828921853214235996609"
    },
    "state": "offer_sent",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "credential_values": {
      "name": "Alice Jones"
    },
    "credential_exchange_id": "d939054d-e081-4ed0-85e6-f5c20a9baa78",
    "created_at": "2019-08-29 18:37:31.320519Z"
  }
}
```
```
Sink: /topic/credentials/ POST
JSON:
```
```json
{
  "topic": "credentials",
  "data": {
    "initiator": "self",
    "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
    "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
    "auto_issue": true,
    "updated_at": "2019-08-29 18:37:31.955917Z",
    "credential_offer": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "key_correctness_proof": {
        "c": "46407036265172047261204021629423991502466090868365745145292279790077348631844",
        "xz_cap": "514358086163629157650567502366045603791283435689648753096216628951829217387071270548022064242067923172303775209188206878602777130806708085662182444873715915707006424051822329774747940104622820526935382153796721114302609139820409518206030320453069391377853600678602058940007280847981247717609211161274065626753506401374547533297693454228563577964742706986776851038206782547363976602316748730885773315912884671436042633169683405175487045032363727960469933714430756533784714970530292181477756754243437291694024963873771433514459604683703590373829358242379854202354880761417128595571868348539354292668944733425925728070568663955227087914689314872545629071633888377824488220766173730746796700993529",
        "xr_cap": [
          [
            "name",
            "4125005438409553271190645242008945309424401294783620356628346040421347652800521101975851129841661164101737404556240381104702281446001991518585843422124308682976543996318942729161160417876901395727059158442209654710668759117787393003575648553928892614910061409796699141202392753862971260190266353533409750487990843470863484734559294480047877583187579915443150584318134836201270875484142486278529238792220151448605879613080529283568512623753535718782247457591423880156296978593591837268950820713798281707492483697733061162621469394140434818089203735654514269366360177320482183006902180843824932489584155587279368677673668332839779175926741601578460704370509770905502672519488670164986358961508"
          ],
          [
            "master_secret",
            "279696447996127413181178951007667952930603537254266927457135109532742142377340721797659362962364112048810611528981976226918418568626207072331002295820556449909140981085391931597864009717035313944000981808189153226770651299055648867074718655361991306599354656561020803449674736156706590568532378865150598011978855222675698812902413003360235385346648812158438716307624779172627948758157682297016725010280633208936321375071223290074760694575056778229594091008510346551211887562258132561580554854649985519228493445603024731080174362127379865941575338663874119374058435724706231493057883635304157687496839366804477575686061621541700613684597718962135768737902478096136715312198149799335538341494166"
          ]
        ]
      },
      "nonce": "235828921853214235996609"
    },
    "state": "request_received",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "credential_values": {
      "name": "Alice Jones"
    },
    "credential_request": {
      "prover_did": "DX1vsRqiRBFHaWoa2c2xuk",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "blinded_ms": {
        "u": "8525738129036418415707646944481407278048034977384240955849783852960265671719257210618681111697528309618271422958713301243036958056074717891790119488600710789310793013721190395041551358342258454250913853981133924585756828738284958852566512556460124739047514366385324605042459121300132399377125749813426661657256804122252818071241929275421075630690652230511022023830982221189553027459972214454448147322580071230770407217541933522279514297738988560243256887540891090070815968675950439098822410372618337412298386745714739339470300108959664604607998123229841206504370526194227588235040905166696546427750483069874473765796",
        "ur": null,
        "hidden_attributes": [
          "master_secret"
        ],
        "committed_attributes": {}
      },
      "blinded_ms_correctness_proof": {
        "c": "74960927049185925308023482680995653320410550813878011156692313660678747223837",
        "v_dash_cap": "1477547782658985169864127926786296562222544814329046257032210053901605936290219495685738821273629239252565194903315647007920995453907701465646723691520194826703405424550553946861265274951825441148083590261563968209445188253203266436519287927325656354321386158115827334767161293855492978741328060359461422823652295999839787560395096944499785183751909260880815856074110991363810857429803405662894104512791314596215502778217980232658006204966502207603721125042677074422995695928794019260069998405356054470259791630271837671560029397474867245655421697783849667109746924985575421454492549195933680548968092529830115022572764319377045591293831104248947216130525425108125839057550048311476479899486870124703378343243293175490",
        "m_caps": {
          "master_secret": "21446022473924984124303265094676571264516048582301439528482342334634169576556759204217166381322400471483479429378545382304574819043239518716298203206863237502735080445366880798027"
        },
        "r_caps": {}
      },
      "nonce": "390223798651524989906518"
    },
    "credential_exchange_id": "d939054d-e081-4ed0-85e6-f5c20a9baa78",
    "thread_id": "e6a1f87e-a2f5-4bff-8f84-2a9d0090f76b",
    "created_at": "2019-08-29 18:37:31.320519Z"
  }
}
```
```
Sink: /topic/credentials/ POST
JSON:
```
```json
{
  "topic": "credentials",
  "data": {
    "credential": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "rev_reg_id": null,
      "values": {
        "name": {
          "raw": "Alice Jones",
          "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
        }
      },
      "signature": {
        "p_credential": {
          "m_2": "3158567314978370316857315257621888079421670958915150065806302933590749312717",
          "a": "11774830141302496234885947949548733379634288053005284994209145176749714202852455419011546659148722414295816883026436140592220955724239684665209043977689524442731547746098250850614609873563032090791050805893842827731375838055531715963515908455725909813784216800860497967382357927023651148764637610715199580742447083973790284660814256267080014982869118776136369691706290067580613094530909016435970122321812391794962560179990309104255086034061934928193657356555541292918805756726341275254309512029372910772692655302637940620556040816281055502892550631775417374307433817670955550555089823283149271895166801939484622549562",
          "e": "259344723055062059907025491480697571938277889515152306249728583105665800713306759149981690559193987143012367913206299323899696942213235956742930131090616619758815660274863562580547",
          "v": "9661537875948583535628990503957879338454326340144338602484715987230898805143348281457060825072506799397837312166451077821364792533005402477417508980116944254825516683063268249584701807009625283680510501216054488580692176564458284413967306824097580831914436378325277015313603491771362503388216653025239396706411293909250624361812349655425317260143831534839831593374378686884052584423633606918867866823104348115519881394844804129026744897308073185853804416570418858593750102656988905372840581432069547703429800844921931379700302021054530469813878140577747770804414999612758969426366407030110739734761753672106113991078639327496099025803533222236560051155476633107983642630004020268008022612600799638650320299610088562551689302160080924752763613324825213575609200398489357382397022343028458353662327417193494071501690738714"
        },
        "r_credential": null
      },
      "signature_correctness_proof": {
        "se": "12249182573268770310631176858703342671611380080809875561015827429251665594151156224342820222993105633813666082023199150160822014567387975875129629627246038990329826519758883051939420955074879862238232708254490922484232507778926877387394981005808879442835768884870281974652369584181212399397309126775556816343824826566548798272400923511154455274059637962013733987583083507834030353630181526440965598957128282137773571815727331129903262905400144285640175028107946730547239428370237766788402564878672341558426188004837317640955430923433893281370792484699341657687503866512535296433494410460591873344594358647885689862131",
        "c": "113221909530756179867367549495292825849610300383357518753022827900262926155208"
      },
      "rev_reg": null,
      "witness": null
    },
    "initiator": "self",
    "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
    "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
    "auto_issue": true,
    "updated_at": "2019-08-29 18:37:32.052326Z",
    "credential_offer": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "key_correctness_proof": {
        "c": "46407036265172047261204021629423991502466090868365745145292279790077348631844",
        "xz_cap": "514358086163629157650567502366045603791283435689648753096216628951829217387071270548022064242067923172303775209188206878602777130806708085662182444873715915707006424051822329774747940104622820526935382153796721114302609139820409518206030320453069391377853600678602058940007280847981247717609211161274065626753506401374547533297693454228563577964742706986776851038206782547363976602316748730885773315912884671436042633169683405175487045032363727960469933714430756533784714970530292181477756754243437291694024963873771433514459604683703590373829358242379854202354880761417128595571868348539354292668944733425925728070568663955227087914689314872545629071633888377824488220766173730746796700993529",
        "xr_cap": [
          [
            "name",
            "4125005438409553271190645242008945309424401294783620356628346040421347652800521101975851129841661164101737404556240381104702281446001991518585843422124308682976543996318942729161160417876901395727059158442209654710668759117787393003575648553928892614910061409796699141202392753862971260190266353533409750487990843470863484734559294480047877583187579915443150584318134836201270875484142486278529238792220151448605879613080529283568512623753535718782247457591423880156296978593591837268950820713798281707492483697733061162621469394140434818089203735654514269366360177320482183006902180843824932489584155587279368677673668332839779175926741601578460704370509770905502672519488670164986358961508"
          ],
          [
            "master_secret",
            "279696447996127413181178951007667952930603537254266927457135109532742142377340721797659362962364112048810611528981976226918418568626207072331002295820556449909140981085391931597864009717035313944000981808189153226770651299055648867074718655361991306599354656561020803449674736156706590568532378865150598011978855222675698812902413003360235385346648812158438716307624779172627948758157682297016725010280633208936321375071223290074760694575056778229594091008510346551211887562258132561580554854649985519228493445603024731080174362127379865941575338663874119374058435724706231493057883635304157687496839366804477575686061621541700613684597718962135768737902478096136715312198149799335538341494166"
          ]
        ]
      },
      "nonce": "235828921853214235996609"
    },
    "state": "issued",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "credential_values": {
      "name": "Alice Jones"
    },
    "credential_request": {
      "prover_did": "DX1vsRqiRBFHaWoa2c2xuk",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "blinded_ms": {
        "u": "8525738129036418415707646944481407278048034977384240955849783852960265671719257210618681111697528309618271422958713301243036958056074717891790119488600710789310793013721190395041551358342258454250913853981133924585756828738284958852566512556460124739047514366385324605042459121300132399377125749813426661657256804122252818071241929275421075630690652230511022023830982221189553027459972214454448147322580071230770407217541933522279514297738988560243256887540891090070815968675950439098822410372618337412298386745714739339470300108959664604607998123229841206504370526194227588235040905166696546427750483069874473765796",
        "ur": null,
        "hidden_attributes": [
          "master_secret"
        ],
        "committed_attributes": {}
      },
      "blinded_ms_correctness_proof": {
        "c": "74960927049185925308023482680995653320410550813878011156692313660678747223837",
        "v_dash_cap": "1477547782658985169864127926786296562222544814329046257032210053901605936290219495685738821273629239252565194903315647007920995453907701465646723691520194826703405424550553946861265274951825441148083590261563968209445188253203266436519287927325656354321386158115827334767161293855492978741328060359461422823652295999839787560395096944499785183751909260880815856074110991363810857429803405662894104512791314596215502778217980232658006204966502207603721125042677074422995695928794019260069998405356054470259791630271837671560029397474867245655421697783849667109746924985575421454492549195933680548968092529830115022572764319377045591293831104248947216130525425108125839057550048311476479899486870124703378343243293175490",
        "m_caps": {
          "master_secret": "21446022473924984124303265094676571264516048582301439528482342334634169576556759204217166381322400471483479429378545382304574819043239518716298203206863237502735080445366880798027"
        },
        "r_caps": {}
      },
      "nonce": "390223798651524989906518"
    },
    "credential_exchange_id": "d939054d-e081-4ed0-85e6-f5c20a9baa78",
    "thread_id": "e6a1f87e-a2f5-4bff-8f84-2a9d0090f76b",
    "created_at": "2019-08-29 18:37:31.320519Z"
  }
}
```
```
Sink: /topic/credentials/ POST
JSON:
```
```json
{
  "topic": "credentials",
  "data": {
    "credential": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "rev_reg_id": null,
      "values": {
        "name": {
          "raw": "Alice Jones",
          "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
        }
      },
      "signature": {
        "p_credential": {
          "m_2": "3158567314978370316857315257621888079421670958915150065806302933590749312717",
          "a": "11774830141302496234885947949548733379634288053005284994209145176749714202852455419011546659148722414295816883026436140592220955724239684665209043977689524442731547746098250850614609873563032090791050805893842827731375838055531715963515908455725909813784216800860497967382357927023651148764637610715199580742447083973790284660814256267080014982869118776136369691706290067580613094530909016435970122321812391794962560179990309104255086034061934928193657356555541292918805756726341275254309512029372910772692655302637940620556040816281055502892550631775417374307433817670955550555089823283149271895166801939484622549562",
          "e": "259344723055062059907025491480697571938277889515152306249728583105665800713306759149981690559193987143012367913206299323899696942213235956742930131090616619758815660274863562580547",
          "v": "9661537875948583535628990503957879338454326340144338602484715987230898805143348281457060825072506799397837312166451077821364792533005402477417508980116944254825516683063268249584701807009625283680510501216054488580692176564458284413967306824097580831914436378325277015313603491771362503388216653025239396706411293909250624361812349655425317260143831534839831593374378686884052584423633606918867866823104348115519881394844804129026744897308073185853804416570418858593750102656988905372840581432069547703429800844921931379700302021054530469813878140577747770804414999612758969426366407030110739734761753672106113991078639327496099025803533222236560051155476633107983642630004020268008022612600799638650320299610088562551689302160080924752763613324825213575609200398489357382397022343028458353662327417193494071501690738714"
        },
        "r_credential": null
      },
      "signature_correctness_proof": {
        "se": "12249182573268770310631176858703342671611380080809875561015827429251665594151156224342820222993105633813666082023199150160822014567387975875129629627246038990329826519758883051939420955074879862238232708254490922484232507778926877387394981005808879442835768884870281974652369584181212399397309126775556816343824826566548798272400923511154455274059637962013733987583083507834030353630181526440965598957128282137773571815727331129903262905400144285640175028107946730547239428370237766788402564878672341558426188004837317640955430923433893281370792484699341657687503866512535296433494410460591873344594358647885689862131",
        "c": "113221909530756179867367549495292825849610300383357518753022827900262926155208"
      },
      "rev_reg": null,
      "witness": null
    },
    "initiator": "self",
    "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
    "credential_definition_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
    "auto_issue": true,
    "updated_at": "2019-08-29 18:37:32.157823Z",
    "credential_offer": {
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "key_correctness_proof": {
        "c": "46407036265172047261204021629423991502466090868365745145292279790077348631844",
        "xz_cap": "514358086163629157650567502366045603791283435689648753096216628951829217387071270548022064242067923172303775209188206878602777130806708085662182444873715915707006424051822329774747940104622820526935382153796721114302609139820409518206030320453069391377853600678602058940007280847981247717609211161274065626753506401374547533297693454228563577964742706986776851038206782547363976602316748730885773315912884671436042633169683405175487045032363727960469933714430756533784714970530292181477756754243437291694024963873771433514459604683703590373829358242379854202354880761417128595571868348539354292668944733425925728070568663955227087914689314872545629071633888377824488220766173730746796700993529",
        "xr_cap": [
          [
            "name",
            "4125005438409553271190645242008945309424401294783620356628346040421347652800521101975851129841661164101737404556240381104702281446001991518585843422124308682976543996318942729161160417876901395727059158442209654710668759117787393003575648553928892614910061409796699141202392753862971260190266353533409750487990843470863484734559294480047877583187579915443150584318134836201270875484142486278529238792220151448605879613080529283568512623753535718782247457591423880156296978593591837268950820713798281707492483697733061162621469394140434818089203735654514269366360177320482183006902180843824932489584155587279368677673668332839779175926741601578460704370509770905502672519488670164986358961508"
          ],
          [
            "master_secret",
            "279696447996127413181178951007667952930603537254266927457135109532742142377340721797659362962364112048810611528981976226918418568626207072331002295820556449909140981085391931597864009717035313944000981808189153226770651299055648867074718655361991306599354656561020803449674736156706590568532378865150598011978855222675698812902413003360235385346648812158438716307624779172627948758157682297016725010280633208936321375071223290074760694575056778229594091008510346551211887562258132561580554854649985519228493445603024731080174362127379865941575338663874119374058435724706231493057883635304157687496839366804477575686061621541700613684597718962135768737902478096136715312198149799335538341494166"
          ]
        ]
      },
      "nonce": "235828921853214235996609"
    },
    "state": "stored",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "credential_values": {
      "name": "Alice Jones"
    },
    "credential_request": {
      "prover_did": "DX1vsRqiRBFHaWoa2c2xuk",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "blinded_ms": {
        "u": "8525738129036418415707646944481407278048034977384240955849783852960265671719257210618681111697528309618271422958713301243036958056074717891790119488600710789310793013721190395041551358342258454250913853981133924585756828738284958852566512556460124739047514366385324605042459121300132399377125749813426661657256804122252818071241929275421075630690652230511022023830982221189553027459972214454448147322580071230770407217541933522279514297738988560243256887540891090070815968675950439098822410372618337412298386745714739339470300108959664604607998123229841206504370526194227588235040905166696546427750483069874473765796",
        "ur": null,
        "hidden_attributes": [
          "master_secret"
        ],
        "committed_attributes": {}
      },
      "blinded_ms_correctness_proof": {
        "c": "74960927049185925308023482680995653320410550813878011156692313660678747223837",
        "v_dash_cap": "1477547782658985169864127926786296562222544814329046257032210053901605936290219495685738821273629239252565194903315647007920995453907701465646723691520194826703405424550553946861265274951825441148083590261563968209445188253203266436519287927325656354321386158115827334767161293855492978741328060359461422823652295999839787560395096944499785183751909260880815856074110991363810857429803405662894104512791314596215502778217980232658006204966502207603721125042677074422995695928794019260069998405356054470259791630271837671560029397474867245655421697783849667109746924985575421454492549195933680548968092529830115022572764319377045591293831104248947216130525425108125839057550048311476479899486870124703378343243293175490",
        "m_caps": {
          "master_secret": "21446022473924984124303265094676571264516048582301439528482342334634169576556759204217166381322400471483479429378545382304574819043239518716298203206863237502735080445366880798027"
        },
        "r_caps": {}
      },
      "nonce": "390223798651524989906518"
    },
    "credential_exchange_id": "d939054d-e081-4ed0-85e6-f5c20a9baa78",
    "thread_id": "e6a1f87e-a2f5-4bff-8f84-2a9d0090f76b",
    "created_at": "2019-08-29 18:37:31.320519Z"
  }
}
```


The --auto-store-credential to the CLI start parameters causes Alice to store the credential once issued.



Alice

```GET /credentials  Fetch credentials from wallet```

Response:
```json
{
  "results": [
    {
      "referent": "c45c1565-b8fb-479d-a6fa-5bdc1895f7d2",
      "attrs": {
        "name": "Alice Jones"
      },
      "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
      "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
      "rev_reg_id": null,
      "cred_rev_id": null
    }
  ]
}
```

Success
```cred_def_id  3avoBCqDMFHFaKUHug9s8W:3:CL:15:default```

Had to dig into credential exchange record to find
cred_exchange_id:  e05d6438-5d47-4360-a2ec-db7f920726e4

Alice

```GET /credentials/{id}  Fetch a credential from wallet by id```

Neither of the credential ids work so filed issue. Looks like bug.

https://github.com/hyperledger/aries-cloudagent-python/issues/163



## 11) Request Proof of Credential by Faber of Alice


Faber request presentation (proof) of credential from Alice
Alice presents (proof) of credential to Faber

Alice now has her Faber credential. Let’s have the Faber agent send a request
for a presentation (a proof) using that credential.
This should be pretty easy for you at this point.

From the Faber browser tab, get ready to execute the
 endpoint. Replace the pre-populated text with the following.
 In doing so, use the techniques we used in issuing the credential
 to replace the string values for each instance of cred_def_id (there are three)
 and connection_id.


Faber
```POST /presentation_exchange/send_request Creates and sends a presentation request```

```json
{
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "version": "1.0.0",
  "name": "Proof of Name",
  "requested_attributes":
  [
    {
      "name": "name",
      "restrictions":
      [
        {"cred_def_id" : "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"}
      ]
    }
  ],
  "requested_predicates":
  [

  ]
}
```

This is an odd proof request as we are asking for proof of attribute because none of the attributes
are numbers for which we can ask for >= <= or range.
This needs some more explaining. This from Stephan Curran

The question I have is what exactly did the presentation request ask for.

I wanted to get proof of name but the request looked like it was asking for proof of attribute name not proof that the value is Alice Jones?

"""The proof request format is exactly what Indy supports, so what you will
need to do is determine how to do what you want to do in the indy-sdk - how
to format the proof request.  There is no ACA-Py magic happening there.

It looks like you are trying to do an "equals" predicate, but I'm not sure
that is supported in the indy-sdk, or if it is, how to request it.  AFAIK
only the ">=" predicate is the only one that is supported.  That said, I've
heard the Indy team say that "equals" is supported, but I've never seen how
to do that.  Seems like an obvious feature, but we've not ever had to do
that."""



Response:
```json
{
  "updated_at": "2019-08-29 19:26:40.171191Z",
  "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
  "state": "request_sent",
  "created_at": "2019-08-29 19:26:40.171191Z",
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "presentation_exchange_id": "81ac6f9a-a79d-4b82-9de3-c006732a2285",
  "presentation_request": {
    "name": "Proof of Name",
    "version": "1.0.0",
    "nonce": "310462305331090141740436123194388898521",
    "requested_attributes": {
      "65301ce7-2008-4b55-b386-172812168ed7": {
        "name": "name",
        "restrictions": [
          {
            "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
          }
        ]
      }
    },
    "requested_predicates": {}
  },
  "initiator": "self"
}
```


Faber Webhook Events:
```
Sink: /topic/presentations/ POST
JSON:
```
```json
{
  "topic": "presentations",
  "data": {
    "updated_at": "2019-08-29 19:26:40.171191Z",
    "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
    "state": "request_sent",
    "created_at": "2019-08-29 19:26:40.171191Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "presentation_exchange_id": "81ac6f9a-a79d-4b82-9de3-c006732a2285",
    "presentation_request": {
      "name": "Proof of Name",
      "version": "1.0.0",
      "nonce": "310462305331090141740436123194388898521",
      "requested_attributes": {
        "65301ce7-2008-4b55-b386-172812168ed7": {
          "name": "name",
          "restrictions": [
            {
              "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
            }
          ]
        }
      },
      "requested_predicates": {}
    },
    "initiator": "self"
  }
}
```
```
Sink: /topic/presentations/ POST
JSON:
```
```json
{
  "topic": "presentations",
  "data": {
    "presentation": {
      "proof": {
        "proofs": [
          {
            "primary_proof": {
              "eq_proof": {
                "revealed_attrs": {
                  "name": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
                },
                "a_prime": "55396902264822583937506805736471355010683095977566467130666732375301848979338350317063498327110068235573279601384706339973014797526806074778770807626121078809501330150634979552845490512180449227646687430661694036601989840995080264123237619420791151422179878380316792402083196441691758058694560223358761329661768231362597540318999372685470795241503659419043290055690623670062099883961510078542228342877815045917435656795385266606277610462420853553194844174087555740584580409722611654016882351980188345146950100471698106128901279751086860848332862446399309644287413102912912923340614314980529819006046136467994895073566",
                "e": "45129707014834440726201844811604114921753097331270107485715258137764594296175388267780610200868648725024388655444552701172305834791259544",
                "v": "838087125020323718840158355572230319962732538204114767321007835047836387595594867656866766924042105036863730974957739577615565053414734329615706166974481277433735541788926706831174580974430609707239569416813371641896539624626802398510198084421128375187127975837779943374931873984890277796909688824891550343539062266976327684780546805681621879618279377414184604317201173846364398403787114129059513790793998645901725219298242111328322570697150915289421118041150352250812729325290385349936152284927316817464099212347838242136312017372485345133053176186555529680914011741244231506720057941733010674024243084804551281992832197173726249209560626451409371813688439014257854958917503226276154977966509394033057909436004763474356017791038227222430536193575647453789115993917675789803866926268806951427795797110917283056573877818531256405724309406881301512057995906775767054310422413062555308646834357907810694671728144171216165581",
                "m": {
                  "master_secret": "4225065005594798178725066771804465460101303304882713449829218902234298342626428082945653486293365992574147933761720220372447851031245261659144113729228270221315756532944633339701"
                },
                "m2": "13012412390359639641710498757324030111997899268859628496328892240678820399061973829783194536857003739774836336120622321990674411945223124970470291331982462709630192156564677956657"
              },
              "ge_proofs": []
            },
            "non_revoc_proof": null
          }
        ],
        "aggregated_proof": {
          "c_hash": "79726470651309629444120970595322031000216131936941454112915536160117072310575",
          "c_list": [
            [
              1,
              182,
              211,
              247,
              123,
              138,
              225,
              129,
              7,
              192,
              254,
              142,
              129,
              246,
              156,
              195,
              186,
              102,
              230,
              142,
              219,
              243,
              156,
              88,
              191,
              33,
              42,
              200,
              8,
              123,
              200,
              194,
              159,
              153,
              217,
              202,
              42,
              141,
              160,
              82,
              13,
              175,
              163,
              184,
              3,
              188,
              183,
              185,
              246,
              190,
              139,
              249,
              150,
              203,
              155,
              17,
              199,
              16,
              12,
              235,
              207,
              161,
              105,
              55,
              8,
              89,
              114,
              127,
              223,
              160,
              198,
              129,
              133,
              228,
              205,
              185,
              210,
              180,
              157,
              198,
              83,
              79,
              223,
              255,
              163,
              80,
              8,
              91,
              55,
              127,
              165,
              55,
              128,
              10,
              64,
              73,
              38,
              28,
              37,
              199,
              71,
              130,
              181,
              31,
              167,
              152,
              237,
              77,
              35,
              172,
              91,
              185,
              152,
              146,
              18,
              86,
              22,
              30,
              225,
              182,
              138,
              192,
              135,
              177,
              158,
              219,
              165,
              49,
              47,
              226,
              247,
              67,
              150,
              184,
              73,
              139,
              229,
              17,
              44,
              105,
              120,
              8,
              34,
              8,
              41,
              116,
              225,
              169,
              14,
              97,
              107,
              222,
              97,
              138,
              25,
              145,
              245,
              183,
              232,
              88,
              244,
              113,
              100,
              195,
              2,
              36,
              218,
              81,
              139,
              112,
              241,
              233,
              173,
              150,
              252,
              60,
              128,
              121,
              82,
              92,
              77,
              119,
              244,
              166,
              94,
              254,
              14,
              239,
              90,
              21,
              16,
              232,
              83,
              114,
              171,
              52,
              221,
              12,
              176,
              92,
              179,
              180,
              236,
              234,
              146,
              49,
              75,
              144,
              252,
              162,
              145,
              168,
              181,
              219,
              6,
              231,
              86,
              53,
              37,
              144,
              246,
              52,
              29,
              36,
              159,
              47,
              52,
              97,
              249,
              235,
              208,
              189,
              252,
              117,
              32,
              35,
              65,
              180,
              194,
              164,
              30,
              200,
              88,
              135,
              82,
              249,
              214,
              62,
              85,
              45,
              100,
              51,
              76,
              221,
              166,
              65,
              30
            ]
          ]
        }
      },
      "requested_proof": {
        "revealed_attrs": {
          "65301ce7-2008-4b55-b386-172812168ed7": {
            "sub_proof_index": 0,
            "raw": "Alice Jones",
            "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
          }
        },
        "self_attested_attrs": {},
        "unrevealed_attrs": {},
        "predicates": {}
      },
      "identifiers": [
        {
          "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
          "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
          "rev_reg_id": null,
          "timestamp": null
        }
      ]
    },
    "updated_at": "2019-08-29 19:26:41.308461Z",
    "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
    "state": "presentation_received",
    "created_at": "2019-08-29 19:26:40.171191Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "presentation_exchange_id": "81ac6f9a-a79d-4b82-9de3-c006732a2285",
    "presentation_request": {
      "name": "Proof of Name",
      "version": "1.0.0",
      "nonce": "310462305331090141740436123194388898521",
      "requested_attributes": {
        "65301ce7-2008-4b55-b386-172812168ed7": {
          "name": "name",
          "restrictions": [
            {
              "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
            }
          ]
        }
      },
      "requested_predicates": {}
    },
    "initiator": "self"
  }
}
```
```
Sink: /topic/presentations/ POST
JSON:
```
```json
{
  "topic": "presentations",
  "data": {
    "presentation": {
      "proof": {
        "proofs": [
          {
            "primary_proof": {
              "eq_proof": {
                "revealed_attrs": {
                  "name": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
                },
                "a_prime": "55396902264822583937506805736471355010683095977566467130666732375301848979338350317063498327110068235573279601384706339973014797526806074778770807626121078809501330150634979552845490512180449227646687430661694036601989840995080264123237619420791151422179878380316792402083196441691758058694560223358761329661768231362597540318999372685470795241503659419043290055690623670062099883961510078542228342877815045917435656795385266606277610462420853553194844174087555740584580409722611654016882351980188345146950100471698106128901279751086860848332862446399309644287413102912912923340614314980529819006046136467994895073566",
                "e": "45129707014834440726201844811604114921753097331270107485715258137764594296175388267780610200868648725024388655444552701172305834791259544",
                "v": "838087125020323718840158355572230319962732538204114767321007835047836387595594867656866766924042105036863730974957739577615565053414734329615706166974481277433735541788926706831174580974430609707239569416813371641896539624626802398510198084421128375187127975837779943374931873984890277796909688824891550343539062266976327684780546805681621879618279377414184604317201173846364398403787114129059513790793998645901725219298242111328322570697150915289421118041150352250812729325290385349936152284927316817464099212347838242136312017372485345133053176186555529680914011741244231506720057941733010674024243084804551281992832197173726249209560626451409371813688439014257854958917503226276154977966509394033057909436004763474356017791038227222430536193575647453789115993917675789803866926268806951427795797110917283056573877818531256405724309406881301512057995906775767054310422413062555308646834357907810694671728144171216165581",
                "m": {
                  "master_secret": "4225065005594798178725066771804465460101303304882713449829218902234298342626428082945653486293365992574147933761720220372447851031245261659144113729228270221315756532944633339701"
                },
                "m2": "13012412390359639641710498757324030111997899268859628496328892240678820399061973829783194536857003739774836336120622321990674411945223124970470291331982462709630192156564677956657"
              },
              "ge_proofs": []
            },
            "non_revoc_proof": null
          }
        ],
        "aggregated_proof": {
          "c_hash": "79726470651309629444120970595322031000216131936941454112915536160117072310575",
          "c_list": [
            [
              1,
              182,
              211,
              247,
              123,
              138,
              225,
              129,
              7,
              192,
              254,
              142,
              129,
              246,
              156,
              195,
              186,
              102,
              230,
              142,
              219,
              243,
              156,
              88,
              191,
              33,
              42,
              200,
              8,
              123,
              200,
              194,
              159,
              153,
              217,
              202,
              42,
              141,
              160,
              82,
              13,
              175,
              163,
              184,
              3,
              188,
              183,
              185,
              246,
              190,
              139,
              249,
              150,
              203,
              155,
              17,
              199,
              16,
              12,
              235,
              207,
              161,
              105,
              55,
              8,
              89,
              114,
              127,
              223,
              160,
              198,
              129,
              133,
              228,
              205,
              185,
              210,
              180,
              157,
              198,
              83,
              79,
              223,
              255,
              163,
              80,
              8,
              91,
              55,
              127,
              165,
              55,
              128,
              10,
              64,
              73,
              38,
              28,
              37,
              199,
              71,
              130,
              181,
              31,
              167,
              152,
              237,
              77,
              35,
              172,
              91,
              185,
              152,
              146,
              18,
              86,
              22,
              30,
              225,
              182,
              138,
              192,
              135,
              177,
              158,
              219,
              165,
              49,
              47,
              226,
              247,
              67,
              150,
              184,
              73,
              139,
              229,
              17,
              44,
              105,
              120,
              8,
              34,
              8,
              41,
              116,
              225,
              169,
              14,
              97,
              107,
              222,
              97,
              138,
              25,
              145,
              245,
              183,
              232,
              88,
              244,
              113,
              100,
              195,
              2,
              36,
              218,
              81,
              139,
              112,
              241,
              233,
              173,
              150,
              252,
              60,
              128,
              121,
              82,
              92,
              77,
              119,
              244,
              166,
              94,
              254,
              14,
              239,
              90,
              21,
              16,
              232,
              83,
              114,
              171,
              52,
              221,
              12,
              176,
              92,
              179,
              180,
              236,
              234,
              146,
              49,
              75,
              144,
              252,
              162,
              145,
              168,
              181,
              219,
              6,
              231,
              86,
              53,
              37,
              144,
              246,
              52,
              29,
              36,
              159,
              47,
              52,
              97,
              249,
              235,
              208,
              189,
              252,
              117,
              32,
              35,
              65,
              180,
              194,
              164,
              30,
              200,
              88,
              135,
              82,
              249,
              214,
              62,
              85,
              45,
              100,
              51,
              76,
              221,
              166,
              65,
              30
            ]
          ]
        }
      },
      "requested_proof": {
        "revealed_attrs": {
          "65301ce7-2008-4b55-b386-172812168ed7": {
            "sub_proof_index": 0,
            "raw": "Alice Jones",
            "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
          }
        },
        "self_attested_attrs": {},
        "unrevealed_attrs": {},
        "predicates": {}
      },
      "identifiers": [
        {
          "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
          "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
          "rev_reg_id": null,
          "timestamp": null
        }
      ]
    },
    "updated_at": "2019-08-29 19:26:42.389065Z",
    "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
    "state": "verified",
    "created_at": "2019-08-29 19:26:40.171191Z",
    "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
    "verified": "true",
    "presentation_exchange_id": "81ac6f9a-a79d-4b82-9de3-c006732a2285",
    "presentation_request": {
      "name": "Proof of Name",
      "version": "1.0.0",
      "nonce": "310462305331090141740436123194388898521",
      "requested_attributes": {
        "65301ce7-2008-4b55-b386-172812168ed7": {
          "name": "name",
          "restrictions": [
            {
              "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
            }
          ]
        }
      },
      "requested_predicates": {}
    },
    "initiator": "self"
  }
}
```



```presentation_exchange_id = 81ac6f9a-a79d-4b82-9de3-c006732a2285```




### Unexpected Result

I thought that I could ask for proof of name as in "Alice Jones" but the following proof request fails

Faber
```POST /presentation_exchange/send_request```

```json
{
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "version": "1.0.0",
  "name": "Proof of Name",
  "requested_attributes":
  [
    {
      "name": "Alice Jones",
      "restrictions":
      [
        {"cred_def_id" : "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"}
      ]
    }
  ],
  "requested_predicates":
  [

  ]
}
```
This shows up as a failure in Alice's console log as follows

```
2019-08-29 13:10:17,730 aries_cloudagent.messaging.base_handler WARNING Could not automatically construct presentation for presentation request Proof of Name:1.0.0 because referent 3f07dba4-94dc-44d4-b9a0-23e1c0a32259 did not produce exactly one credential result. 0 credentials were returned from the wallet.
2019-08-29 13:10:17,730 aiohttp.access INFO 127.0.0.1 [29/Aug/2019:19:10:17 +0000] "POST / HTTP/1.1" 200 149 "-" "Python/3.7 aiohttp/3.5.4"
```


## 12) Verify Presentation Request by Faber of Alice


Note that in the response, the state is request_sent.
That is because when the HTTP response was generated
(immediately after sending the request), Alice’s agent had not yet responded
to the request.

We’ll have to do another request to verify the presentation worked.
Copy the value of the presentation_exchange_id field from the response and
use it in executing the GET /presentation_exchange/{id} endpoint.
That should return a result showing a status of verified. Proof positive!



Faber

```GET /presentation_exchange/{id}   Fetch a single presentation exchange record```

```81ac6f9a-a79d-4b82-9de3-c006732a2285```


Response
```json
{
  "presentation": {
    "proof": {
      "proofs": [
        {
          "primary_proof": {
            "eq_proof": {
              "revealed_attrs": {
                "name": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
              },
              "a_prime": "55396902264822583937506805736471355010683095977566467130666732375301848979338350317063498327110068235573279601384706339973014797526806074778770807626121078809501330150634979552845490512180449227646687430661694036601989840995080264123237619420791151422179878380316792402083196441691758058694560223358761329661768231362597540318999372685470795241503659419043290055690623670062099883961510078542228342877815045917435656795385266606277610462420853553194844174087555740584580409722611654016882351980188345146950100471698106128901279751086860848332862446399309644287413102912912923340614314980529819006046136467994895073566",
              "e": "45129707014834440726201844811604114921753097331270107485715258137764594296175388267780610200868648725024388655444552701172305834791259544",
              "v": "838087125020323718840158355572230319962732538204114767321007835047836387595594867656866766924042105036863730974957739577615565053414734329615706166974481277433735541788926706831174580974430609707239569416813371641896539624626802398510198084421128375187127975837779943374931873984890277796909688824891550343539062266976327684780546805681621879618279377414184604317201173846364398403787114129059513790793998645901725219298242111328322570697150915289421118041150352250812729325290385349936152284927316817464099212347838242136312017372485345133053176186555529680914011741244231506720057941733010674024243084804551281992832197173726249209560626451409371813688439014257854958917503226276154977966509394033057909436004763474356017791038227222430536193575647453789115993917675789803866926268806951427795797110917283056573877818531256405724309406881301512057995906775767054310422413062555308646834357907810694671728144171216165581",
              "m": {
                "master_secret": "4225065005594798178725066771804465460101303304882713449829218902234298342626428082945653486293365992574147933761720220372447851031245261659144113729228270221315756532944633339701"
              },
              "m2": "13012412390359639641710498757324030111997899268859628496328892240678820399061973829783194536857003739774836336120622321990674411945223124970470291331982462709630192156564677956657"
            },
            "ge_proofs": []
          },
          "non_revoc_proof": null
        }
      ],
      "aggregated_proof": {
        "c_hash": "79726470651309629444120970595322031000216131936941454112915536160117072310575",
        "c_list": [
          [
            1,
            182,
            211,
            247,
            123,
            138,
            225,
            129,
            7,
            192,
            254,
            142,
            129,
            246,
            156,
            195,
            186,
            102,
            230,
            142,
            219,
            243,
            156,
            88,
            191,
            33,
            42,
            200,
            8,
            123,
            200,
            194,
            159,
            153,
            217,
            202,
            42,
            141,
            160,
            82,
            13,
            175,
            163,
            184,
            3,
            188,
            183,
            185,
            246,
            190,
            139,
            249,
            150,
            203,
            155,
            17,
            199,
            16,
            12,
            235,
            207,
            161,
            105,
            55,
            8,
            89,
            114,
            127,
            223,
            160,
            198,
            129,
            133,
            228,
            205,
            185,
            210,
            180,
            157,
            198,
            83,
            79,
            223,
            255,
            163,
            80,
            8,
            91,
            55,
            127,
            165,
            55,
            128,
            10,
            64,
            73,
            38,
            28,
            37,
            199,
            71,
            130,
            181,
            31,
            167,
            152,
            237,
            77,
            35,
            172,
            91,
            185,
            152,
            146,
            18,
            86,
            22,
            30,
            225,
            182,
            138,
            192,
            135,
            177,
            158,
            219,
            165,
            49,
            47,
            226,
            247,
            67,
            150,
            184,
            73,
            139,
            229,
            17,
            44,
            105,
            120,
            8,
            34,
            8,
            41,
            116,
            225,
            169,
            14,
            97,
            107,
            222,
            97,
            138,
            25,
            145,
            245,
            183,
            232,
            88,
            244,
            113,
            100,
            195,
            2,
            36,
            218,
            81,
            139,
            112,
            241,
            233,
            173,
            150,
            252,
            60,
            128,
            121,
            82,
            92,
            77,
            119,
            244,
            166,
            94,
            254,
            14,
            239,
            90,
            21,
            16,
            232,
            83,
            114,
            171,
            52,
            221,
            12,
            176,
            92,
            179,
            180,
            236,
            234,
            146,
            49,
            75,
            144,
            252,
            162,
            145,
            168,
            181,
            219,
            6,
            231,
            86,
            53,
            37,
            144,
            246,
            52,
            29,
            36,
            159,
            47,
            52,
            97,
            249,
            235,
            208,
            189,
            252,
            117,
            32,
            35,
            65,
            180,
            194,
            164,
            30,
            200,
            88,
            135,
            82,
            249,
            214,
            62,
            85,
            45,
            100,
            51,
            76,
            221,
            166,
            65,
            30
          ]
        ]
      }
    },
    "requested_proof": {
      "revealed_attrs": {
        "65301ce7-2008-4b55-b386-172812168ed7": {
          "sub_proof_index": 0,
          "raw": "Alice Jones",
          "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
        }
      },
      "self_attested_attrs": {},
      "unrevealed_attrs": {},
      "predicates": {}
    },
    "identifiers": [
      {
        "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
        "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
        "rev_reg_id": null,
        "timestamp": null
      }
    ]
  },
  "updated_at": "2019-08-29 19:26:42.389065Z",
  "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
  "state": "verified",
  "created_at": "2019-08-29 19:26:40.171191Z",
  "connection_id": "9793558d-2d24-42d2-a249-dc9a4c48a886",
  "verified": "true",
  "presentation_exchange_id": "81ac6f9a-a79d-4b82-9de3-c006732a2285",
  "presentation_request": {
    "name": "Proof of Name",
    "version": "1.0.0",
    "nonce": "310462305331090141740436123194388898521",
    "requested_attributes": {
      "65301ce7-2008-4b55-b386-172812168ed7": {
        "name": "name",
        "restrictions": [
          {
            "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
          }
        ]
      }
    },
    "requested_predicates": {}
  },
  "initiator": "self"
}

```

No Webhook events


We can also see that the presentation at Alice

Alice

```GET /presentation_exchange Fetch all presentation exchange records'''


Presentation Exchange Id

baa7f9ff-cfed-4401-a036-433209046059


Response
```json
   {
      "presentation_request": {
        "name": "Proof of Name",
        "version": "1.0.0",
        "nonce": "310462305331090141740436123194388898521",
        "requested_attributes": {
          "65301ce7-2008-4b55-b386-172812168ed7": {
            "name": "name",
            "restrictions": [
              {
                "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default"
              }
            ]
          }
        },
        "requested_predicates": {}
      },
      "presentation_exchange_id": "baa7f9ff-cfed-4401-a036-433209046059",
      "created_at": "2019-08-29 19:26:40.223237Z",
      "initiator": "external",
      "thread_id": "89680001-574a-4aa8-98a0-fd9dad9cfc87",
      "updated_at": "2019-08-29 19:26:41.244452Z",
      "presentation": {
        "proof": {
          "proofs": [
            {
              "primary_proof": {
                "eq_proof": {
                  "revealed_attrs": {
                    "name": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
                  },
                  "a_prime": "55396902264822583937506805736471355010683095977566467130666732375301848979338350317063498327110068235573279601384706339973014797526806074778770807626121078809501330150634979552845490512180449227646687430661694036601989840995080264123237619420791151422179878380316792402083196441691758058694560223358761329661768231362597540318999372685470795241503659419043290055690623670062099883961510078542228342877815045917435656795385266606277610462420853553194844174087555740584580409722611654016882351980188345146950100471698106128901279751086860848332862446399309644287413102912912923340614314980529819006046136467994895073566",
                  "e": "45129707014834440726201844811604114921753097331270107485715258137764594296175388267780610200868648725024388655444552701172305834791259544",
                  "v": "838087125020323718840158355572230319962732538204114767321007835047836387595594867656866766924042105036863730974957739577615565053414734329615706166974481277433735541788926706831174580974430609707239569416813371641896539624626802398510198084421128375187127975837779943374931873984890277796909688824891550343539062266976327684780546805681621879618279377414184604317201173846364398403787114129059513790793998645901725219298242111328322570697150915289421118041150352250812729325290385349936152284927316817464099212347838242136312017372485345133053176186555529680914011741244231506720057941733010674024243084804551281992832197173726249209560626451409371813688439014257854958917503226276154977966509394033057909436004763474356017791038227222430536193575647453789115993917675789803866926268806951427795797110917283056573877818531256405724309406881301512057995906775767054310422413062555308646834357907810694671728144171216165581",
                  "m": {
                    "master_secret": "4225065005594798178725066771804465460101303304882713449829218902234298342626428082945653486293365992574147933761720220372447851031245261659144113729228270221315756532944633339701"
                  },
                  "m2": "13012412390359639641710498757324030111997899268859628496328892240678820399061973829783194536857003739774836336120622321990674411945223124970470291331982462709630192156564677956657"
                },
                "ge_proofs": []
              },
              "non_revoc_proof": null
            }
          ],
          "aggregated_proof": {
            "c_hash": "79726470651309629444120970595322031000216131936941454112915536160117072310575",
            "c_list": [
              [
                1,
                182,
                211,
                247,
                123,
                138,
                225,
                129,
                7,
                192,
                254,
                142,
                129,
                246,
                156,
                195,
                186,
                102,
                230,
                142,
                219,
                243,
                156,
                88,
                191,
                33,
                42,
                200,
                8,
                123,
                200,
                194,
                159,
                153,
                217,
                202,
                42,
                141,
                160,
                82,
                13,
                175,
                163,
                184,
                3,
                188,
                183,
                185,
                246,
                190,
                139,
                249,
                150,
                203,
                155,
                17,
                199,
                16,
                12,
                235,
                207,
                161,
                105,
                55,
                8,
                89,
                114,
                127,
                223,
                160,
                198,
                129,
                133,
                228,
                205,
                185,
                210,
                180,
                157,
                198,
                83,
                79,
                223,
                255,
                163,
                80,
                8,
                91,
                55,
                127,
                165,
                55,
                128,
                10,
                64,
                73,
                38,
                28,
                37,
                199,
                71,
                130,
                181,
                31,
                167,
                152,
                237,
                77,
                35,
                172,
                91,
                185,
                152,
                146,
                18,
                86,
                22,
                30,
                225,
                182,
                138,
                192,
                135,
                177,
                158,
                219,
                165,
                49,
                47,
                226,
                247,
                67,
                150,
                184,
                73,
                139,
                229,
                17,
                44,
                105,
                120,
                8,
                34,
                8,
                41,
                116,
                225,
                169,
                14,
                97,
                107,
                222,
                97,
                138,
                25,
                145,
                245,
                183,
                232,
                88,
                244,
                113,
                100,
                195,
                2,
                36,
                218,
                81,
                139,
                112,
                241,
                233,
                173,
                150,
                252,
                60,
                128,
                121,
                82,
                92,
                77,
                119,
                244,
                166,
                94,
                254,
                14,
                239,
                90,
                21,
                16,
                232,
                83,
                114,
                171,
                52,
                221,
                12,
                176,
                92,
                179,
                180,
                236,
                234,
                146,
                49,
                75,
                144,
                252,
                162,
                145,
                168,
                181,
                219,
                6,
                231,
                86,
                53,
                37,
                144,
                246,
                52,
                29,
                36,
                159,
                47,
                52,
                97,
                249,
                235,
                208,
                189,
                252,
                117,
                32,
                35,
                65,
                180,
                194,
                164,
                30,
                200,
                88,
                135,
                82,
                249,
                214,
                62,
                85,
                45,
                100,
                51,
                76,
                221,
                166,
                65,
                30
              ]
            ]
          }
        },
        "requested_proof": {
          "revealed_attrs": {
            "65301ce7-2008-4b55-b386-172812168ed7": {
              "sub_proof_index": 0,
              "raw": "Alice Jones",
              "encoded": "72896232743708443677449555551687504476536417389324439453514323796296385992918"
            }
          },
          "self_attested_attrs": {},
          "unrevealed_attrs": {},
          "predicates": {}
        },
        "identifiers": [
          {
            "schema_id": "3avoBCqDMFHFaKUHug9s8W:2:fabername:0.1.0",
            "cred_def_id": "3avoBCqDMFHFaKUHug9s8W:3:CL:15:default",
            "rev_reg_id": null,
            "timestamp": null
          }
        ]
      },
      "connection_id": "18f5e869-b565-4c12-9ae8-4f7c86c90aa3",
      "state": "presentation_sent"
    },

```

### Notes

As with the issue credential process, the agents handled some of the
presentation steps without bothering the controller.
In this case, Alice’s agent processed the presentation request automatically
because it was started with the --auto-respond-presentation-request parameter set,
and her wallet contained exactly one credential that satisfied the
presentation-request from the Faber agent. Similarly, the Faber agent was
started with the --auto-verify-presentation parameter and so on receipt of
the presentation, it verified the presentation and updated the status accordingly.



## Conclusion


That’s the OpenAPI-based tutorial. Feel free to play with the API and learn
how it works. More importantly, as you implement a controller, use the OpenAPI
user interface to test out the calls you will be using as you go.
The list of API calls is grouped by protocol and if you are familiar with
the protocols (Aries RFCs) the API call names should be pretty obvious.

